<load target="css/controller.css" />
<load target="css/colorpicker.css" />
<load target="js/controller.js" />
<load target="js/colorpicker.js" />
<load target="js/jquery.sprintf.js" />
<load target="js/jquery.tabSlideOut.v1.3.js" />

<div class="layout-controller">
	<a href="#" class="slideout_btn"></a>
	<h2>CONTRAL BOX <span style="font-size:11px; color:#c3c3c3">by KSO &amp; CAMERON</span></h2>
	<div class="slideout-content">
		<form action="{getUrl()}" method="post" enctype="multipart/form-data" target="hidden_iframe" class="content_form">
			<input type="hidden" name="module" value="layout" />
			<input type="hidden" name="act" value="procLayoutAdminUpdate" />
			<input type="hidden" name="layout_srl" value="{$layout_info->layout_srl}" />
			<input type="hidden" name="title" value="{$layout_info->layout_title}" />
			<input type="hidden" name="layout" value="{$layout_info->layout}" />
			<div class="control-content"></div>
			<div class="control-buttons">
				<input type="submit" value="{$lang->apply}" onclick="alert('{$lang->user_apply_prompt}'); return false;"|cond="$logged_info->is_admin!='Y'" onclick="if(confirm('{$lang->apply_prompt}')){return true} return false;"|cond="$logged_info->is_admin=='Y'" />
				<input type="submit" value="{$lang->reset}" onclick="alert('{$lang->user_reset_prompt}'); return false;"|cond="$logged_info->is_admin!='Y'" onclick="if(confirm('{$lang->reset_prompt}')){control_reset_settings(this.form);} return false;"|cond="$logged_info->is_admin=='Y'" />
			</div>
		</form>
		<iframe name="hidden_iframe" frameborder="0" style="display:none"></iframe>
	</div>
</div>

<script>
	var info_path = '{$layout_info->path}conf/info.xml';
	var lang_type = '{$lang_type}';

	var layout_info = new Array();
	var menus = new Array();
	<block loop="$layout_info=>$key,$val">
		<block cond="is_string($val)">
			layout_info['{$key}'] = '{addcslashes(htmlspecialchars($val),"\\\'\"&\n\r<>")}';
		</block>
	</block>
	<block loop="$layout_info->menu=>$key,$val">
		var menu1 = new Array();
		<block loop="$val=>$key2,$val2">
			menu1['{$key2}'] = '{$val2}';
		</block>
		menus['{$key}'] = menu1;
	</block>

	function filestyle() {
		jQuery('input[type=file]', '.layout-controller').fileinput();
/*
		jQuery('input[type=file]', '.layout-controller').filestyle({ 
			image: "{$layout_info->path}img/default/choose-file.gif",
			imageheight : 22,
			imagewidth : 82,
			width : 50
		});
*/
	}

	(function($) {
		jQuery(function($) {
			$('.layout-controller').tabSlideOut({
				tabHandle: '.slideout_btn',
				pathToTabImage: '{$addon_path}img/default/left_pop_login.gif',
				imageWidth: '35px',
				imageHeight: '43px',
				tabLocation: 'right',
				speed: 500,
				action: 'click',
				topPos: '140px',
				fixedPosition: true
			});
		});
	}) (jQuery);

</script>
